{
  "version": 3,
  "sources": ["../src/plugin.ts"],
  "sourcesContent": ["import { Editor } from 'tinymce';\r\nimport { ACListItem, AutoCompleteOptions } from '.';\r\n\r\nconst wordJoiner = '\\u2060';\r\n\r\nconst render = (item: ACListItem, index: number, opts: AutoCompleteOptions<string>) => `<li><a href=\"javascript:;\"><span data-idx=\"${index}\">${item[opts.queryBy]}</span></a></li>`;\r\n\r\nconst insert = (item: ACListItem, opts: AutoCompleteOptions<string>) => `<span>${item[opts.insertFrom || opts.queryBy]}</span>&nbsp;`;\r\n\r\nconst highlighter = (text: string) => text;\r\n\r\n\r\nconst autoCompleteDefaults: AutoCompleteOptions<string> = {\r\n    source: [],\r\n    delay: 500,\r\n    queryBy: 'name',\r\n    insertFrom: 'name',\r\n    items: 10,\r\n    delimiter: \"@\",\r\n    render,\r\n    insert,\r\n    highlighter,\r\n};\r\n\r\n\r\nclass AutoComplete {\r\n    private editor: any;\r\n    private options: AutoCompleteOptions<string>;\r\n    private query: string = '';\r\n    private searchTimeout?: number;\r\n    private $dropdown: HTMLElement | null = null;\r\n    hasFocus: boolean = true;\r\n\r\n    constructor(editor: any, options: Partial<AutoCompleteOptions<string>>) {\r\n        this.editor = editor;\r\n        this.options = Object.assign({}, autoCompleteDefaults, options);\r\n        this.renderInput();\r\n        this.bindEvents();\r\n    }\r\n\r\n    private renderInput(): void {\r\n        const rawHtml = `\r\n      <span id=\"autocomplete\">\r\n          <span id=\"autocomplete-delimiter\">${this.options.delimiter || ''}</span>\r\n          <span id=\"autocomplete-searchtext\"><span class=\"dummy\">${wordJoiner}</span></span>\r\n      </span>\r\n    `;\r\n\r\n        this.editor.execCommand('mceInsertContent', false, rawHtml);\r\n        this.editor.focus();\r\n        const inputElement = this.editor.selection.dom.select('span#autocomplete-searchtext span')[0];\r\n        this.editor.selection.select(inputElement);\r\n        this.editor.selection.collapse(0);\r\n    }\r\n\r\n    private bindEvents(): void {\r\n        this.editor.on('keyup', this.rteKeyUp.bind(this));\r\n        this.editor.on('keydown', this.rteKeyDown.bind(this), true);\r\n        this.editor.on('click', this.rteClicked.bind(this));\r\n\r\n        document.body.addEventListener('click', this.rteLostFocus.bind(this));\r\n        this.editor.getWin().addEventListener('scroll', () => this.cleanUp(true));\r\n    }\r\n\r\n    private rteKeyUp(event: KeyboardEvent): void {\r\n        switch (event.key) {\r\n            case 'ArrowUp':\r\n            case 'ArrowDown':\r\n            case 'Shift':\r\n            case 'Control':\r\n            case 'Alt':\r\n                break;\r\n            case 'Backspace':\r\n                if (this.query === '') {\r\n                    this.cleanUp(true);\r\n                } else {\r\n                    this.lookup();\r\n                }\r\n                break;\r\n            case 'Tab':\r\n            case 'Enter':\r\n                if (this.$dropdown) {\r\n                    const activeItem = this.$dropdown.querySelector('li.active') as HTMLElement;\r\n                    if (activeItem) {\r\n                        this.select(activeItem.dataset);\r\n                        this.cleanUp(false);\r\n                    } else {\r\n                        this.cleanUp(true);\r\n                    }\r\n                }\r\n                break;\r\n            case 'Escape':\r\n                this.cleanUp(true);\r\n                break;\r\n            default:\r\n                this.lookup();\r\n        }\r\n    }\r\n\r\n    private rteKeyDown(event: KeyboardEvent): void {\r\n        switch (event.key) {\r\n            case 'Tab':\r\n            case 'Enter':\r\n            case 'Escape':\r\n                event.preventDefault();\r\n                break;\r\n            case 'ArrowUp':\r\n                event.preventDefault();\r\n                if (this.$dropdown) {\r\n                    this.highlightPreviousResult();\r\n                }\r\n                break;\r\n            case 'ArrowDown':\r\n                event.preventDefault();\r\n                if (this.$dropdown) {\r\n                    this.highlightNextResult();\r\n                }\r\n                break;\r\n        }\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    private rteClicked(event: MouseEvent): void {\r\n        const target = event.target as HTMLElement;\r\n        if (this.hasFocus && target.parentElement?.id !== 'autocomplete-searchtext') {\r\n            this.cleanUp(true);\r\n        }\r\n    }\r\n\r\n    private rteLostFocus(): void {\r\n        if (this.hasFocus) {\r\n            this.cleanUp(true);\r\n        }\r\n    }\r\n\r\n    private lookup(): void {\r\n        const searchTextElement = this.editor.getBody().querySelector('#autocomplete-searchtext') as HTMLElement | null;\r\n        this.query = searchTextElement?.textContent?.trim().replace(wordJoiner, '') || '';\r\n\r\n        if (!this.$dropdown) {\r\n            this.show();\r\n        }\r\n\r\n        clearTimeout(this.searchTimeout);\r\n        this.searchTimeout = window.setTimeout(() => {\r\n            const items = this.options.source;\r\n            if (!items) return;\r\n\r\n            if (Array.isArray(items)) {\r\n                this.process(items);\r\n            } else {\r\n                // here we have a fun that take a call back\r\n                items(this.query, this.options.delimiter!, this.process.bind(this))\r\n            }\r\n        }, this.options.delay);\r\n    }\r\n\r\n    private process(data: ACListItem[]): void {\r\n        if (!this.hasFocus) return;\r\n        console.log(this.options.queryBy, this.query, data);\r\n        const matchedItems = data.filter(this.options.matcher || ((item) =>\r\n            item[this.options.queryBy].toLowerCase().includes(this.query.toLowerCase())));\r\n\r\n        const sortedItems = this.options.sorter ? this.options.sorter(matchedItems) : matchedItems;\r\n        const limitedItems = sortedItems.slice(0, this.options.items);\r\n        const result = limitedItems.reduce((r, item, i, arr) => {\r\n            const element = document.createElement('div');\r\n            element.innerHTML = this.options.render!(item, i, this.options!);\r\n            const text = element.textContent || \"\";\r\n            element.innerHTML = element.innerHTML.replace(text, this.options.highlighter!(text) || '');\r\n            Object.entries(item).forEach(([key, val]) => element.dataset[key] = `${val}`);\r\n            r = `${r}${element.outerHTML}`;\r\n            // document.appendChild(element);\r\n            return r;\r\n        }, \"\")\r\n\r\n\r\n        if (result.length) {\r\n            this.$dropdown!.innerHTML = result;\r\n            this.$dropdown!.style.display = 'block';\r\n        } else {\r\n            this.$dropdown!.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    private show(): void {\r\n        const dropdown = document.createElement('ul');\r\n        dropdown.className = 'rte-autocomplete dropdown-menu';\r\n        dropdown.innerHTML = '<li class=\"loading\"></li>';\r\n\r\n        const offset = this.offset();\r\n        dropdown.style.top = `${offset.top}px`;\r\n        dropdown.style.left = `${offset.left}px`;\r\n\r\n        document.body.appendChild(dropdown);\r\n        dropdown.addEventListener('click', (e) => this.autoCompleteClick(e));\r\n        this.$dropdown = dropdown;\r\n    }\r\n\r\n    private autoCompleteClick(event: MouseEvent): void {\r\n        const target = (event.target as HTMLElement).closest('li');\r\n        if (target) {\r\n            this.select(target.dataset);\r\n            this.cleanUp(false);\r\n        }\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n    }\r\n\r\n    private highlightPreviousResult(): void {\r\n        const items = this.$dropdown?.querySelectorAll('li') || [];\r\n        const activeIndex = Array.from(items).findIndex((item) => item.classList.contains('active'));\r\n        const newIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\r\n\r\n        items.forEach((item) => item.classList.remove('active'));\r\n        items[newIndex]?.classList.add('active');\r\n    }\r\n\r\n    private highlightNextResult(): void {\r\n        const items = this.$dropdown?.querySelectorAll('li') || [];\r\n        const activeIndex = Array.from(items).findIndex((item) => item.classList.contains('active'));\r\n        const newIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\r\n\r\n        items.forEach((item) => item.classList.remove('active'));\r\n        items[newIndex]?.classList.add('active');\r\n    }\r\n\r\n    private select(item: DOMStringMap): void {\r\n        this.editor.focus();\r\n        const selection = this.editor.dom.select('span#autocomplete')[0];\r\n        this.editor.dom.remove(selection);\r\n        this.editor.execCommand('mceInsertContent', false, this.options.insert!(item as ACListItem, this.options));\r\n    }\r\n\r\n    private offset(): { top: number; left: number } {\r\n        console.log(\"this.editor\", this.editor,\"this.editor.dom.document\", this.editor.dom.doc.activeElement);\r\n        const rtePosition = (this.editor.dom.doc.activeElement as HTMLElement).getBoundingClientRect();\r\n        const contentAreaPosition = ((this.editor.dom.doc.activeElement as HTMLElement)).getBoundingClientRect();\r\n        const autocompleteElement = (this.editor.dom.doc.activeElement as HTMLElement).querySelector('#autocomplete') as HTMLElement | null;\r\n        if (!autocompleteElement) {\r\n            throw new Error('Autocomplete element not found');\r\n        }\r\n        const nodePosition = autocompleteElement.getBoundingClientRect();\r\n\r\n        return {\r\n            top: rtePosition.top + contentAreaPosition.top + nodePosition.top + (this.editor.selection.getNode() as HTMLElement).offsetHeight - this.editor.getDoc().scrollTop + 5,\r\n            left: rtePosition.left + contentAreaPosition.left + nodePosition.left,\r\n        };\r\n    }\r\n\r\n    private cleanUp(rollback: boolean): void {\r\n        this.unbindEvents();\r\n        this.hasFocus = false;\r\n\r\n        this.$dropdown?.remove();\r\n        this.$dropdown = null;\r\n\r\n        if (rollback) {\r\n            const text = this.query;\r\n            const selection = this.editor.dom.select('span#autocomplete')[0];\r\n            if (!selection) return;\r\n\r\n            const replacement = document.createElement('p');\r\n            replacement.textContent = this.options.delimiter + text;\r\n\r\n            this.editor.dom.replace(replacement, selection);\r\n            this.editor.selection.select(replacement);\r\n            this.editor.selection.collapse();\r\n        }\r\n    }\r\n\r\n    private unbindEvents(): void {\r\n        document.body.removeEventListener('click', this.rteLostFocus.bind(this));\r\n        this.editor.off('keyup', this.rteKeyUp.bind(this));\r\n        this.editor.off('keydown', this.rteKeyDown.bind(this));\r\n        this.editor.off('click', this.rteClicked.bind(this));\r\n    }\r\n}\r\n\r\nconst PLUGIN_NAME = \"mention\";\r\nconst getMetadata = () => {\r\n    return {\r\n        name: PLUGIN_NAME,\r\n        author: \"Surya Pratap\",\r\n        url: \"https://github.com/suryapratap/tinymce-mention-plugin\"\r\n    };\r\n}\r\n\r\nfunction registerPlugin(editor: Editor) {\r\n\r\n    let autoComplete: AutoComplete | undefined;\r\n    const autoCompleteData = editor.getParam(PLUGIN_NAME) as AutoCompleteOptions<string[]>;\r\n    const delimiter = autoCompleteData.delimiter\r\n        ? Array.isArray(autoCompleteData.delimiter)\r\n            ? autoCompleteData.delimiter\r\n            : [autoCompleteData.delimiter]\r\n        : ['@'];\r\n\r\n    function prevCharIsSpace() {\r\n        const range = editor.selection.getRng();\r\n        const start = range.startOffset;\r\n        const text = ((range.startContainer as HTMLElement)?.dataset) || '';\r\n        return !text.toString().charAt(start - 1).trim().length;\r\n    }\r\n    editor.on('keypress', (event: KeyboardEvent) => {\r\n        if (delimiter.includes(event.key) && prevCharIsSpace() && (!autoComplete || !autoComplete?.hasFocus)) {\r\n            event.preventDefault();\r\n            console.log(\"activate mentions autocomplete\", event.key, { delimiter }, autoComplete?.hasFocus);\r\n            autoComplete = new AutoComplete(editor, { ...autoCompleteData, delimiter: event.key });\r\n        }\r\n    });\r\n\r\n    return { getMetadata }\r\n}\r\n\r\n(window as any).tinymce.PluginManager.add(PLUGIN_NAME, registerPlugin);\r\n\r\n\r\n\r\n"],
  "mappings": "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",
  "names": []
}
